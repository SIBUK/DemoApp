var slideSpeed = 400;
var selector = $("#com<%= @post_comment.post_comment_id %>");
var current = selector.find("#testid");
var id = $("#testid");

if (id.length > 0)
{
    id.slideUp( slideSpeed, function() {
        $(this).remove();
    });
}

if (current.length === 0)
{
    selector.append("<%= escape_javascript(render partial: 'post_comments/new_comment', locals: {comment: @post_comment, post_id: @post.id, comment_id: @post_comment.post_comment_id}).html_safe %>");
    selector.find(".comment-form").attr('id', 'testid');
    selector.find("#testid").hide().slideDown(slideSpeed);
}